# cloud , IA y programación

## Ejemplo de chatbot

```python
from google.colab import ai

print("--- CHATBOT INICIADO (Escribe 'adios' para salir) ---")

historia = [] # Lista para guardar el contexto (opcional, avanzado)

while True:
    pregunta = input("\nTu: ")
    
    if pregunta.lower() == "adios":
        print("Chat finalizado.")
        break
    
    # Llamada a la IA
    try:
        # Usamos el modelo flash para rapidez
        response = ai.generate_text(pregunta, model_name='google/gemini-2.5-flash')
        print(f"IA: {response}")
    except Exception as e:
        print(f"Ocurrió un error: {e}")
```

## análisis de sentimiento

```python
from google.colab import ai
import matplotlib.pyplot as plt

# Lista de opiniones (pueden ser inventadas por los alumnos)
comentarios = [
    "Me encantó la película, fue increíble",
    "La comida estaba fría y el servicio lento",
    "Es un producto normal, cumple su función",
    "¡Qué experiencia tan horrible!",
    "Fantástico, volveré seguro",
    "No está mal, pero esperaba más"
]

positivos = 0
negativos = 0
neutrales = 0

print("Analizando comentarios...")

for comentario in comentarios:
    # Pedimos a la IA que clasifique con UNA sola palabra
    prompt = f"Clasifica el siguiente texto como 'Positivo', 'Negativo' o 'Neutral'. Responde SOLO con la palabra: '{comentario}'"
    sentimiento = ai.generate_text(prompt).strip()
    
    print(f"'{comentario}' -> {sentimiento}")
    
    if "Positivo" in sentimiento:
        positivos += 1
    elif "Negativo" in sentimiento:
        negativos += 1
    else:
        neutrales += 1

# Crear el gráfico
etiquetas = ['Positivos', 'Negativos', 'Neutrales']
valores = [positivos, negativos, neutrales]
colores = ['green', 'red', 'gray']

plt.bar(etiquetas, valores, color=colores)
plt.title("Análisis de Sentimientos con Gemini")
plt.show()
```

## analisis en un mapa

```python
import folium
from google.colab import ai

# 1. Definimos el tema del mapa
tema_mapa = "3 lugares clave de la Segunda Guerra Mundial en Europa"

# 2. Pedimos a la IA que nos dé los datos estructurados en Python
prompt = f"""
Genera una lista de Python válida que contenga 3 diccionarios.
Cada diccionario debe tener: 'nombre', 'lat' (float), 'lon' (float), y 'desc' (breve descripción).
El tema es: {tema_mapa}.
Responde SOLO con la lista de Python, nada más.
"""

respuesta = ai.generate_text(prompt, model_name='google/gemini-2.5-flash')
# Limpieza de formato de código
respuesta_limpia = respuesta.replace("```python", "").replace("```", "").strip()

print(f"Datos recibidos de la IA:\n{respuesta_limpia}\n")

# 3. Convertimos el string a una lista real (¡Cuidado! eval es potente)
lugares = eval(respuesta_limpia)

# 4. Creamos el mapa centrado en Europa
mapa = folium.Map(location=[48.85, 2.35], zoom_start=4)

# Añadimos los marcadores
for lugar in lugares:
    folium.Marker(
        location=[lugar['lat'], lugar['lon']],
        popup=f"<b>{lugar['nombre']}</b><br>{lugar['desc']}",
        icon=folium.Icon(color="red", icon="info-sign")
    ).add_to(mapa)

# Mostrar el mapa
mapa
```
## sacar en un mapa los lugares de las noticias actuales del día

```python
# 2. EL CÓDIGO DEL PROYECTO
import feedparser
import folium
from google.colab import ai
import json

# --- CONFIGURACIÓN ---
# Puedes cambiar esto por el RSS de El Mundo, CNN, BBC, periódicos locales...
url_periodico = "https://feeds.elpais.com/mrss-s/pages/ep/site/elpais.com/portada" 
# url_periodico = "https://e00-elmundo.uecdn.es/elmundo/rss/portada.xml"

# Leemos las noticias
print(f"Leyendo noticias de: {url_periodico} ...")
feed = feedparser.parse(url_periodico)

# Creamos un mapa base centrado (ej. en Europa/España)
mapa = folium.Map(location=[40.416, -3.703], zoom_start=4)

print(f"Se han encontrado {len(feed.entries)} noticias. Analizando las 5 primeras...\n")

# --- BUCLE DE ANÁLISIS ---
for i, noticia in enumerate(feed.entries[:5]): # Solo analizamos las 5 primeras para ir rápido
    titulo = noticia.title
    print(f"[{i+1}] Analizando: {titulo}...")

    # EL PROMPT MÁGICO
    # Le pedimos a Gemini que actúe como un GPS humano
    prompt = f"""
    Analiza este titular de noticia: "{titulo}".
    Identifica el lugar geográfico PRINCIPAL donde ocurre la noticia (Ciudad, País o Región).
    Si la noticia no tiene un lugar físico claro (es de opinión o abstracta), devuelve "None".
    
    Responde ÚNICAMENTE con un JSON válido con este formato exacto:
    {{"lugar": "Nombre del lugar", "lat": 0.0, "lon": 0.0, "razon": "breve explicación"}}
    
    Si es None, responde: {{"lugar": "None"}}
    """

    try:
        # Llamamos a Gemini
        respuesta = ai.generate_text(prompt, model_name='google/gemini-2.5-flash')
        
        # Limpiamos la respuesta (a veces la IA pone comillas de código)
        respuesta_limpia = respuesta.replace("```json", "").replace("```", "").strip()
        datos = json.loads(respuesta_limpia)

        # Si encontró un lugar, lo ponemos en el mapa
        if datos["lugar"] != "None":
            folium.Marker(
                location=[datos['lat'], datos['lon']],
                popup=f"<b>{datos['lugar']}</b><br>{titulo}",
                icon=folium.Icon(color="red", icon="info-sign"),
                tooltip=datos['razon']
            ).add_to(mapa)
            print(f"   ---> Localizado en: {datos['lugar']} ({datos['lat']}, {datos['lon']})")
        else:
            print("   ---> No se detectó ubicación relevante.")

    except Exception as e:
        print(f"   ---> Error procesando noticia: {e}")

# --- MOSTRAR RESULTADO ---
print("\n¡Mapa generado! (Mira abajo)")
mapa
```
